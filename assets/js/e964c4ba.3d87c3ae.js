"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[5341],{62715:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>t,contentTitle:()=>c,default:()=>x,frontMatter:()=>i,metadata:()=>d,toc:()=>h});const d=JSON.parse('{"id":"plugin/protocol","title":"\u901a\u8baf\u534f\u8bae","description":"TGO \u63d2\u4ef6\u7cfb\u7edf\u91c7\u7528\u57fa\u4e8e Unix Socket \u7684 JSON-RPC 2.0 \u534f\u8bae\u8fdb\u884c\u901a\u8baf\u3002\u672c\u6587\u6863\u8be6\u7ec6\u8bf4\u660e\u534f\u8bae\u89c4\u8303\u3002","source":"@site/docs/plugin/protocol.md","sourceDirName":"plugin","slug":"/plugin/protocol","permalink":"/plugin/protocol","draft":false,"unlisted":false,"editUrl":"https://github.com/tgoai/tgo/edit/main/docs-site/docs/plugin/protocol.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"protocol","title":"\u901a\u8baf\u534f\u8bae","sidebar_position":3},"sidebar":"pluginSidebar","previous":{"title":"\u5feb\u901f\u5165\u95e8","permalink":"/plugin/quickstart"},"next":{"title":"\u53ef\u63d2\u70b9\u8be6\u89e3","permalink":"/plugin/extension-points"}}');var r=s(74848),l=s(28453);const i={id:"protocol",title:"\u901a\u8baf\u534f\u8bae",sidebar_position:3},c="\u901a\u8baf\u534f\u8bae\u89c4\u8303",t={},h=[{value:"\u534f\u8bae\u6982\u8ff0",id:"\u534f\u8bae\u6982\u8ff0",level:2},{value:"\u901a\u8baf\u67b6\u6784",id:"\u901a\u8baf\u67b6\u6784",level:3},{value:"\u901a\u8baf\u65b9\u5f0f",id:"\u901a\u8baf\u65b9\u5f0f",level:3},{value:"Socket \u8def\u5f84",id:"socket-\u8def\u5f84",level:3},{value:"\u6d88\u606f\u683c\u5f0f",id:"\u6d88\u606f\u683c\u5f0f",level:3},{value:"\u6838\u5fc3\u4ea4\u4e92\u6a21\u5f0f",id:"\u6838\u5fc3\u4ea4\u4e92\u6a21\u5f0f",level:2},{value:"\u54cd\u5e94\u7c7b\u578b",id:"\u54cd\u5e94\u7c7b\u578b",level:3},{value:"JSON-UI \u54cd\u5e94\u793a\u4f8b",id:"json-ui-\u54cd\u5e94\u793a\u4f8b",level:3},{value:"JSON-ACTION \u54cd\u5e94\u793a\u4f8b",id:"json-action-\u54cd\u5e94\u793a\u4f8b",level:3},{value:"JSON-RPC 2.0 \u89c4\u8303",id:"json-rpc-20-\u89c4\u8303",level:2},{value:"\u8bf7\u6c42\u683c\u5f0f",id:"\u8bf7\u6c42\u683c\u5f0f",level:3},{value:"\u6210\u529f\u54cd\u5e94",id:"\u6210\u529f\u54cd\u5e94",level:3},{value:"\u9519\u8bef\u54cd\u5e94",id:"\u9519\u8bef\u54cd\u5e94",level:3},{value:"\u6807\u51c6\u9519\u8bef\u7801",id:"\u6807\u51c6\u9519\u8bef\u7801",level:3},{value:"\u751f\u547d\u5468\u671f\u65b9\u6cd5",id:"\u751f\u547d\u5468\u671f\u65b9\u6cd5",level:2},{value:"\u8fde\u63a5\u6d41\u7a0b",id:"\u8fde\u63a5\u6d41\u7a0b",level:3},{value:"register",id:"register",level:3},{value:"shutdown",id:"shutdown",level:3},{value:"ping",id:"ping",level:3},{value:"\u4e1a\u52a1\u65b9\u6cd5",id:"\u4e1a\u52a1\u65b9\u6cd5",level:2},{value:"visitor_panel/render",id:"visitor_panelrender",level:3},{value:"visitor_panel/event",id:"visitor_panelevent",level:3},{value:"chat_toolbar/render",id:"chat_toolbarrender",level:3},{value:"chat_toolbar/event",id:"chat_toolbarevent",level:3},{value:"sidebar_iframe/config",id:"sidebar_iframeconfig",level:3},{value:"channel_integration/manifest",id:"channel_integrationmanifest",level:3},{value:"JSON-ACTION \u7c7b\u578b\u53c2\u8003",id:"json-action-\u7c7b\u578b\u53c2\u8003",level:2},{value:"\u652f\u6301\u7684 ACTION \u7c7b\u578b",id:"\u652f\u6301\u7684-action-\u7c7b\u578b",level:3},{value:"ACTION \u8be6\u7ec6\u8bf4\u660e",id:"action-\u8be6\u7ec6\u8bf4\u660e",level:3},{value:"open_url",id:"open_url",level:4},{value:"insert_text",id:"insert_text",level:4},{value:"send_message",id:"send_message",level:4},{value:"show_toast",id:"show_toast",level:4},{value:"copy_text",id:"copy_text",level:4},{value:"refresh",id:"refresh",level:4},{value:"close_modal",id:"close_modal",level:4},{value:"noop",id:"noop",level:4},{value:"\u9519\u8bef\u5904\u7406\u6700\u4f73\u5b9e\u8df5",id:"\u9519\u8bef\u5904\u7406\u6700\u4f73\u5b9e\u8df5",level:2},{value:"1. \u8d85\u65f6\u5904\u7406",id:"1-\u8d85\u65f6\u5904\u7406",level:3},{value:"2. \u4f18\u96c5\u964d\u7ea7",id:"2-\u4f18\u96c5\u964d\u7ea7",level:3},{value:"3. \u4e1a\u52a1\u9519\u8bef\u7801",id:"3-\u4e1a\u52a1\u9519\u8bef\u7801",level:3},{value:"\u7f16\u7801\u8981\u6c42",id:"\u7f16\u7801\u8981\u6c42",level:2},{value:"\u5b57\u7b26\u7f16\u7801",id:"\u5b57\u7b26\u7f16\u7801",level:3},{value:"\u6362\u884c\u7b26",id:"\u6362\u884c\u7b26",level:3},{value:"JSON \u683c\u5f0f",id:"json-\u683c\u5f0f",level:3},{value:"\u4e0b\u4e00\u6b65",id:"\u4e0b\u4e00\u6b65",level:2}];function j(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"\u901a\u8baf\u534f\u8bae\u89c4\u8303",children:"\u901a\u8baf\u534f\u8bae\u89c4\u8303"})}),"\n",(0,r.jsxs)(e.p,{children:["TGO \u63d2\u4ef6\u7cfb\u7edf\u91c7\u7528\u57fa\u4e8e ",(0,r.jsx)(e.strong,{children:"Unix Socket"})," \u7684 JSON-RPC 2.0 \u534f\u8bae\u8fdb\u884c\u901a\u8baf\u3002\u672c\u6587\u6863\u8be6\u7ec6\u8bf4\u660e\u534f\u8bae\u89c4\u8303\u3002"]}),"\n",(0,r.jsx)(e.h2,{id:"\u534f\u8bae\u6982\u8ff0",children:"\u534f\u8bae\u6982\u8ff0"}),"\n",(0,r.jsx)(e.h3,{id:"\u901a\u8baf\u67b6\u6784",children:"\u901a\u8baf\u67b6\u6784"}),"\n",(0,r.jsx)(e.p,{children:"TGO \u91c7\u7528\u7c7b\u4f3c Docker \u7684 C/S \u67b6\u6784\uff1a"}),"\n",(0,r.jsx)(e.mermaid,{value:"flowchart LR\n    subgraph TGO[TGO \u5bbf\u4e3b\u7a0b\u5e8f]\n        Server[Socket \u670d\u52a1\u7aef]\n    end\n    \n    Plugin1[\u63d2\u4ef6 A] --\x3e|\u8fde\u63a5| Server\n    Plugin2[\u63d2\u4ef6 B] --\x3e|\u8fde\u63a5| Server\n    Plugin3[\u63d2\u4ef6 C] --\x3e|\u8fde\u63a5| Server"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"TGO \u5bbf\u4e3b\u7a0b\u5e8f"}),"\uff1a\u4f5c\u4e3a ",(0,r.jsx)(e.strong,{children:"Socket \u670d\u52a1\u7aef"}),"\uff0c\u76d1\u542c\u8fde\u63a5"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u63d2\u4ef6\u8fdb\u7a0b"}),"\uff1a\u4f5c\u4e3a ",(0,r.jsx)(e.strong,{children:"Socket \u5ba2\u6237\u7aef"}),"\uff0c\u4e3b\u52a8\u8fde\u63a5\u5bbf\u4e3b"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"\u901a\u8baf\u65b9\u5f0f",children:"\u901a\u8baf\u65b9\u5f0f"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Socket \u7c7b\u578b"}),"\uff1aUnix Domain Socket\uff08",(0,r.jsx)(e.code,{children:"AF_UNIX"}),"\uff0c",(0,r.jsx)(e.code,{children:"SOCK_STREAM"}),"\uff09"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u8fde\u63a5\u6a21\u5f0f"}),"\uff1a\u5bbf\u4e3b\u4f5c\u4e3a\u670d\u52a1\u7aef\u76d1\u542c\uff0c\u63d2\u4ef6\u4f5c\u4e3a\u5ba2\u6237\u7aef\u8fde\u63a5"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u901a\u8baf\u65b9\u5411"}),"\uff1a\u53cc\u5411\u5168\u53cc\u5de5\u901a\u8baf"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"socket-\u8def\u5f84",children:"Socket \u8def\u5f84"}),"\n",(0,r.jsx)(e.p,{children:"TGO \u5bbf\u4e3b\u7a0b\u5e8f\u7684 Socket \u6587\u4ef6\u8def\u5f84\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"/var/run/tgo/tgo.sock\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u63d2\u4ef6\u542f\u52a8\u65f6\u9700\u8981\uff1a"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\u8fde\u63a5\u5230\u5bbf\u4e3b\u7a0b\u5e8f\u7684 Socket\uff08",(0,r.jsx)(e.code,{children:"/var/run/tgo/tgo.sock"}),"\uff09"]}),"\n",(0,r.jsxs)(e.li,{children:["\u53d1\u9001 ",(0,r.jsx)(e.code,{children:"register"})," \u8bf7\u6c42\u6ce8\u518c\u63d2\u4ef6\u80fd\u529b"]}),"\n",(0,r.jsx)(e.li,{children:"\u7b49\u5f85\u5bbf\u4e3b\u7a0b\u5e8f\u7684\u8bf7\u6c42\u5e76\u8fd4\u56de\u54cd\u5e94"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"\u6d88\u606f\u683c\u5f0f",children:"\u6d88\u606f\u683c\u5f0f"}),"\n",(0,r.jsxs)(e.p,{children:["\u91c7\u7528 ",(0,r.jsx)(e.strong,{children:"\u957f\u5ea6\u524d\u7f00 + JSON"})," \u683c\u5f0f\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"[4\u5b57\u8282\u957f\u5ea6][JSON\u6570\u636e]\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u957f\u5ea6\u524d\u7f00"}),"\uff1a4 \u5b57\u8282\u5927\u7aef\u5e8f\uff08Big-Endian\uff09\u65e0\u7b26\u53f7\u6574\u6570\uff0c\u8868\u793a\u540e\u7eed JSON \u6570\u636e\u7684\u5b57\u8282\u957f\u5ea6"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"JSON \u6570\u636e"}),"\uff1aUTF-8 \u7f16\u7801\u7684 JSON \u5b57\u7b26\u4e32"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u793a\u4f8b\uff08\u4f2a\u4ee3\u7801\uff09\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"# \u53d1\u9001\u6d88\u606f\ndef send_message(socket, data):\n    json_bytes = json.dumps(data).encode('utf-8')\n    length = len(json_bytes)\n    socket.sendall(struct.pack('>I', length))  # 4\u5b57\u8282\u5927\u7aef\u5e8f\n    socket.sendall(json_bytes)\n\n# \u63a5\u6536\u6d88\u606f\ndef recv_message(socket):\n    length_bytes = socket.recv(4)\n    length = struct.unpack('>I', length_bytes)[0]\n    json_bytes = socket.recv(length)\n    return json.loads(json_bytes.decode('utf-8'))\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u6838\u5fc3\u4ea4\u4e92\u6a21\u5f0f",children:"\u6838\u5fc3\u4ea4\u4e92\u6a21\u5f0f"}),"\n",(0,r.jsxs)(e.p,{children:["TGO \u63d2\u4ef6\u91c7\u7528\u300c",(0,r.jsx)(e.strong,{children:"\u6e32\u67d3-\u4e8b\u4ef6"}),"\u300d\u4e24\u9636\u6bb5\u4ea4\u4e92\u6a21\u5f0f\uff1a"]}),"\n",(0,r.jsx)(e.mermaid,{value:"flowchart LR\n    subgraph Phase1[\u9636\u6bb51: UI\u6e32\u67d3]\n        A[\u5bbf\u4e3b\u53d1\u8d77\u6e32\u67d3\u8bf7\u6c42] --\x3e B[\u63d2\u4ef6\u8fd4\u56de JSON-UI]\n        B --\x3e C[\u5bbf\u4e3b\u6e32\u67d3\u754c\u9762]\n    end\n    \n    subgraph Phase2[\u9636\u6bb52: \u4e8b\u4ef6\u5904\u7406]\n        D[\u7528\u6237\u70b9\u51fb\u6309\u94ae] --\x3e E[\u5bbf\u4e3b\u53d1\u9001\u4e8b\u4ef6]\n        E --\x3e F[\u63d2\u4ef6\u8fd4\u56de JSON-ACTION]\n        F --\x3e G[\u5bbf\u4e3b\u6267\u884c\u52a8\u4f5c]\n    end\n    \n    Phase1 --\x3e Phase2"}),"\n",(0,r.jsx)(e.h3,{id:"\u54cd\u5e94\u7c7b\u578b",children:"\u54cd\u5e94\u7c7b\u578b"}),"\n",(0,r.jsx)(e.p,{children:"\u63d2\u4ef6\u54cd\u5e94\u5206\u4e3a\u4e24\u79cd\u7c7b\u578b\uff1a"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u54cd\u5e94\u7c7b\u578b"}),(0,r.jsx)(e.th,{children:"\u89e6\u53d1\u573a\u666f"}),(0,r.jsx)(e.th,{children:"\u7528\u9014"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"JSON-UI"})}),(0,r.jsxs)(e.td,{children:["\u54cd\u5e94 ",(0,r.jsx)(e.code,{children:"render"})," \u8bf7\u6c42"]}),(0,r.jsx)(e.td,{children:"\u63cf\u8ff0\u9700\u8981\u6e32\u67d3\u7684 UI \u7ed3\u6784"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.strong,{children:"JSON-ACTION"})}),(0,r.jsxs)(e.td,{children:["\u54cd\u5e94 ",(0,r.jsx)(e.code,{children:"event"})," \u4e8b\u4ef6"]}),(0,r.jsx)(e.td,{children:"\u6307\u793a\u5bbf\u4e3b\u6267\u884c\u7684\u64cd\u4f5c"})]})]})]}),"\n",(0,r.jsx)(e.h3,{id:"json-ui-\u54cd\u5e94\u793a\u4f8b",children:"JSON-UI \u54cd\u5e94\u793a\u4f8b"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": {\n    "template": "key_value",\n    "data": {\n      "title": "\u5ba2\u6237\u4fe1\u606f",\n      "items": [\n        {"label": "\u59d3\u540d", "value": "\u5f20\u4e09"},\n        {"label": "VIP\u7b49\u7ea7", "value": "\u9ec4\u91d1\u4f1a\u5458"}\n      ]\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"json-action-\u54cd\u5e94\u793a\u4f8b",children:"JSON-ACTION \u54cd\u5e94\u793a\u4f8b"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 2,\n  "result": {\n    "action": "open_url",\n    "data": {\n      "url": "https://crm.example.com/customers/12345",\n      "target": "_blank"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"json-rpc-20-\u89c4\u8303",children:"JSON-RPC 2.0 \u89c4\u8303"}),"\n",(0,r.jsx)(e.h3,{id:"\u8bf7\u6c42\u683c\u5f0f",children:"\u8bf7\u6c42\u683c\u5f0f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "method_name",\n  "params": {\n    "key": "value"\n  }\n}\n'})}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u5b57\u6bb5"}),(0,r.jsx)(e.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(e.th,{children:"\u5fc5\u586b"}),(0,r.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"jsonrpc"})}),(0,r.jsx)(e.td,{children:"string"}),(0,r.jsx)(e.td,{children:"\u662f"}),(0,r.jsxs)(e.td,{children:["\u56fa\u5b9a\u503c ",(0,r.jsx)(e.code,{children:'"2.0"'})]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"id"})}),(0,r.jsx)(e.td,{children:"number/string"}),(0,r.jsx)(e.td,{children:"\u662f"}),(0,r.jsx)(e.td,{children:"\u8bf7\u6c42\u552f\u4e00\u6807\u8bc6\u7b26"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"method"})}),(0,r.jsx)(e.td,{children:"string"}),(0,r.jsx)(e.td,{children:"\u662f"}),(0,r.jsx)(e.td,{children:"\u8981\u8c03\u7528\u7684\u65b9\u6cd5\u540d"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"params"})}),(0,r.jsx)(e.td,{children:"object"}),(0,r.jsx)(e.td,{children:"\u5426"}),(0,r.jsx)(e.td,{children:"\u65b9\u6cd5\u53c2\u6570"})]})]})]}),"\n",(0,r.jsx)(e.h3,{id:"\u6210\u529f\u54cd\u5e94",children:"\u6210\u529f\u54cd\u5e94"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": {\n    "key": "value"\n  }\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u9519\u8bef\u54cd\u5e94",children:"\u9519\u8bef\u54cd\u5e94"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "error": {\n    "code": -32600,\n    "message": "Invalid Request",\n    "data": {}\n  }\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u6807\u51c6\u9519\u8bef\u7801",children:"\u6807\u51c6\u9519\u8bef\u7801"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u9519\u8bef\u7801"}),(0,r.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"-32700"})}),(0,r.jsx)(e.td,{children:"Parse Error - JSON \u89e3\u6790\u9519\u8bef"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"-32600"})}),(0,r.jsx)(e.td,{children:"Invalid Request - \u65e0\u6548\u7684\u8bf7\u6c42\u683c\u5f0f"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"-32601"})}),(0,r.jsx)(e.td,{children:"Method Not Found - \u65b9\u6cd5\u4e0d\u5b58\u5728"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"-32602"})}),(0,r.jsx)(e.td,{children:"Invalid Params - \u53c2\u6570\u9519\u8bef"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"-32603"})}),(0,r.jsx)(e.td,{children:"Internal Error - \u5185\u90e8\u9519\u8bef"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsxs)(e.td,{children:[(0,r.jsx)(e.code,{children:"-32000"})," ~ ",(0,r.jsx)(e.code,{children:"-32099"})]}),(0,r.jsx)(e.td,{children:"\u670d\u52a1\u5668\u81ea\u5b9a\u4e49\u9519\u8bef"})]})]})]}),"\n",(0,r.jsx)(e.h2,{id:"\u751f\u547d\u5468\u671f\u65b9\u6cd5",children:"\u751f\u547d\u5468\u671f\u65b9\u6cd5"}),"\n",(0,r.jsx)(e.h3,{id:"\u8fde\u63a5\u6d41\u7a0b",children:"\u8fde\u63a5\u6d41\u7a0b"}),"\n",(0,r.jsx)(e.mermaid,{value:"sequenceDiagram\n    participant Host as TGO \u5bbf\u4e3b\u7a0b\u5e8f\n    participant Plugin as \u63d2\u4ef6\u8fdb\u7a0b\n    \n    Note over Host: \u542f\u52a8\u5e76\u76d1\u542c /var/run/tgo/tgo.sock\n    Plugin->>Host: \u8fde\u63a5 Socket\n    Plugin->>Host: \u53d1\u9001 register \u8bf7\u6c42\n    Host--\x3e>Plugin: \u8fd4\u56de\u6ce8\u518c\u7ed3\u679c\n    \n    loop \u4e1a\u52a1\u4ea4\u4e92\n        Host->>Plugin: \u53d1\u9001\u8bf7\u6c42\n        Plugin--\x3e>Host: \u8fd4\u56de\u54cd\u5e94\n    end\n    \n    Host->>Plugin: \u53d1\u9001 shutdown \u8bf7\u6c42\n    Plugin--\x3e>Host: \u786e\u8ba4\u5173\u95ed\n    Plugin->>Plugin: \u65ad\u5f00\u8fde\u63a5\u5e76\u9000\u51fa"}),"\n",(0,r.jsx)(e.h3,{id:"register",children:"register"}),"\n",(0,r.jsxs)(e.p,{children:["\u63d2\u4ef6\u8fde\u63a5\u540e\uff0c",(0,r.jsx)(e.strong,{children:"\u4e3b\u52a8\u53d1\u9001"}),"\u6ce8\u518c\u8bf7\u6c42\uff0c\u5411\u5bbf\u4e3b\u7a0b\u5e8f\u58f0\u660e\u81ea\u5df1\u7684\u80fd\u529b\u3002"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u8bf7\u6c42\uff08\u63d2\u4ef6 \u2192 \u5bbf\u4e3b\uff09\uff1a"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "register",\n  "params": {\n    "name": "my-plugin",\n    "version": "1.0.0",\n    "description": "\u63d2\u4ef6\u63cf\u8ff0",\n    "author": "\u4f5c\u8005\u540d",\n    "homepage": "https://github.com/...",\n    "capabilities": [\n      {\n        "type": "visitor_panel",\n        "title": "\u5ba2\u6237\u8ba2\u5355",\n        "icon": "shopping-cart",\n        "priority": 10\n      }\n    ]\n  }\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u54cd\u5e94\uff08\u5bbf\u4e3b \u2192 \u63d2\u4ef6\uff09\uff1a"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": {\n    "success": true,\n    "plugin_id": "plugin_abc123",\n    "host_version": "1.0.0"\n  }\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u80fd\u529b\u58f0\u660e\u5b57\u6bb5\uff1a"})}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u5b57\u6bb5"}),(0,r.jsx)(e.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(e.th,{children:"\u5fc5\u586b"}),(0,r.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"type"})}),(0,r.jsx)(e.td,{children:"string"}),(0,r.jsx)(e.td,{children:"\u662f"}),(0,r.jsx)(e.td,{children:"\u53ef\u63d2\u70b9\u7c7b\u578b"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"title"})}),(0,r.jsx)(e.td,{children:"string"}),(0,r.jsx)(e.td,{children:"\u662f"}),(0,r.jsx)(e.td,{children:"\u663e\u793a\u6807\u9898"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"icon"})}),(0,r.jsx)(e.td,{children:"string"}),(0,r.jsx)(e.td,{children:"\u5426"}),(0,r.jsx)(e.td,{children:"\u56fe\u6807\u540d\u79f0\uff08\u4f7f\u7528 Lucide \u56fe\u6807\u5e93\uff09"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"priority"})}),(0,r.jsx)(e.td,{children:"number"}),(0,r.jsx)(e.td,{children:"\u5426"}),(0,r.jsx)(e.td,{children:"\u663e\u793a\u4f18\u5148\u7ea7\uff0c\u6570\u503c\u8d8a\u5c0f\u8d8a\u9760\u524d"})]})]})]}),"\n",(0,r.jsx)(e.h3,{id:"shutdown",children:"shutdown"}),"\n",(0,r.jsx)(e.p,{children:"\u5bbf\u4e3b\u7a0b\u5e8f\u8bf7\u6c42\u63d2\u4ef6\u4f18\u96c5\u5173\u95ed\u3002"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u8bf7\u6c42\uff08\u5bbf\u4e3b \u2192 \u63d2\u4ef6\uff09\uff1a"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 999,\n  "method": "shutdown"\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u54cd\u5e94\uff08\u63d2\u4ef6 \u2192 \u5bbf\u4e3b\uff09\uff1a"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 999,\n  "result": {\n    "success": true\n  }\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u63d2\u4ef6\u5e94\u5728\u53d1\u9001\u54cd\u5e94\u540e\u9000\u51fa\u8fdb\u7a0b\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"ping",children:"ping"}),"\n",(0,r.jsx)(e.p,{children:"\u5fc3\u8df3\u68c0\u6d4b\uff0c\u7528\u4e8e\u786e\u8ba4\u63d2\u4ef6\u8fdb\u7a0b\u5b58\u6d3b\u3002"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u8bf7\u6c42\uff1a"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 100,\n  "method": "ping"\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u54cd\u5e94\uff1a"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 100,\n  "result": {\n    "pong": true,\n    "timestamp": 1703664000000\n  }\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u4e1a\u52a1\u65b9\u6cd5",children:"\u4e1a\u52a1\u65b9\u6cd5"}),"\n",(0,r.jsx)(e.p,{children:"\u4e1a\u52a1\u65b9\u6cd5\u5206\u4e3a\u4e24\u7c7b\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u6e32\u67d3\u65b9\u6cd5"}),"\uff08",(0,r.jsx)(e.code,{children:"*/render"}),"\uff09\uff1a\u8fd4\u56de JSON-UI\uff0c\u7528\u4e8e\u6e32\u67d3\u754c\u9762"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u4e8b\u4ef6\u65b9\u6cd5"}),"\uff08",(0,r.jsx)(e.code,{children:"*/event"}),"\uff09\uff1a\u8fd4\u56de JSON-ACTION\uff0c\u7528\u4e8e\u6267\u884c\u64cd\u4f5c"]}),"\n"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h3,{id:"visitor_panelrender",children:"visitor_panel/render"}),"\n",(0,r.jsxs)(e.p,{children:["\u6e32\u67d3\u8bbf\u5ba2\u9762\u677f\u5185\u5bb9\u3002\u8fd4\u56de ",(0,r.jsx)(e.strong,{children:"JSON-UI"}),"\u3002"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u8bf7\u6c42\uff1a"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 2,\n  "method": "visitor_panel/render",\n  "params": {\n    "visitor_id": "v_abc123",\n    "session_id": "s_xyz789",\n    "visitor": {\n      "name": "\u5f20\u4e09",\n      "email": "zhangsan@example.com",\n      "phone": "138****1234",\n      "metadata": {\n        "user_id": "u_12345",\n        "vip_level": 3\n      }\n    },\n    "context": {\n      "current_page": "https://example.com/products/123",\n      "referrer": "https://google.com"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u54cd\u5e94\uff08JSON-UI\uff09\uff1a"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 2,\n  "result": {\n    "template": "key_value",\n    "data": {\n      "title": "\u5ba2\u6237\u4fe1\u606f",\n      "items": [\n        {"label": "VIP\u7b49\u7ea7", "value": "\u9ec4\u91d1\u4f1a\u5458"},\n        {"label": "\u7d2f\u8ba1\u6d88\u8d39", "value": "\xa512,580"}\n      ]\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h3,{id:"visitor_panelevent",children:"visitor_panel/event"}),"\n",(0,r.jsxs)(e.p,{children:["\u5904\u7406\u8bbf\u5ba2\u9762\u677f\u4e2d\u7684\u7528\u6237\u4ea4\u4e92\u4e8b\u4ef6\uff08\u5982\u6309\u94ae\u70b9\u51fb\uff09\u3002\u8fd4\u56de ",(0,r.jsx)(e.strong,{children:"JSON-ACTION"}),"\u3002"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u8bf7\u6c42\uff1a"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 3,\n  "method": "visitor_panel/event",\n  "params": {\n    "event_type": "button_click",\n    "action_id": "view_in_crm",\n    "visitor_id": "v_abc123",\n    "session_id": "s_xyz789",\n    "payload": {}\n  }\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u54cd\u5e94\uff08JSON-ACTION\uff09\uff1a"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 3,\n  "result": {\n    "action": "open_url",\n    "data": {\n      "url": "https://crm.example.com/customers/v_abc123",\n      "target": "_blank"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h3,{id:"chat_toolbarrender",children:"chat_toolbar/render"}),"\n",(0,r.jsxs)(e.p,{children:["\u6e32\u67d3\u804a\u5929\u5de5\u5177\u680f\u6309\u94ae\u70b9\u51fb\u540e\u7684\u5185\u5bb9\u3002\u8fd4\u56de ",(0,r.jsx)(e.strong,{children:"JSON-UI"}),"\u3002"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u8bf7\u6c42\uff1a"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 4,\n  "method": "chat_toolbar/render",\n  "params": {\n    "action_id": "quick_reply",\n    "session_id": "s_xyz789",\n    "visitor_id": "v_abc123",\n    "agent_id": "a_agent01",\n    "context": {\n      "last_message": "\u8bf7\u95ee\u53d1\u8d27\u65f6\u95f4\u662f\u591a\u4e45\uff1f",\n      "input_text": ""\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u54cd\u5e94\uff08JSON-UI - \u663e\u793a\u5217\u8868\u9009\u62e9\uff09\uff1a"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 4,\n  "result": {\n    "template": "list",\n    "data": {\n      "title": "\u5feb\u6377\u56de\u590d",\n      "searchable": true,\n      "items": [\n        {"id": "r1", "text": "\u611f\u8c22\u60a8\u7684\u54a8\u8be2\uff0c\u8bf7\u95ee\u6709\u4ec0\u4e48\u53ef\u4ee5\u5e2e\u60a8\uff1f"},\n        {"id": "r2", "text": "\u8ba2\u5355\u4e00\u822c3-5\u4e2a\u5de5\u4f5c\u65e5\u53d1\u8d27"},\n        {"id": "r3", "text": "\u5982\u6709\u95ee\u9898\u53ef\u968f\u65f6\u8054\u7cfb\u6211\u4eec"}\n      ]\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h3,{id:"chat_toolbarevent",children:"chat_toolbar/event"}),"\n",(0,r.jsxs)(e.p,{children:["\u5904\u7406\u804a\u5929\u5de5\u5177\u680f\u4e2d\u7684\u7528\u6237\u4ea4\u4e92\u4e8b\u4ef6\u3002\u8fd4\u56de ",(0,r.jsx)(e.strong,{children:"JSON-ACTION"}),"\u3002"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u8bf7\u6c42\uff1a"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 5,\n  "method": "chat_toolbar/event",\n  "params": {\n    "event_type": "item_select",\n    "action_id": "quick_reply",\n    "selected_id": "r2",\n    "session_id": "s_xyz789",\n    "visitor_id": "v_abc123"\n  }\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u54cd\u5e94\uff08JSON-ACTION - \u63d2\u5165\u6587\u672c\uff09\uff1a"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 5,\n  "result": {\n    "action": "insert_text",\n    "data": {\n      "text": "\u8ba2\u5355\u4e00\u822c3-5\u4e2a\u5de5\u4f5c\u65e5\u53d1\u8d27",\n      "replace": false\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"sidebar_iframeconfig",children:"sidebar_iframe/config"}),"\n",(0,r.jsx)(e.p,{children:"\u83b7\u53d6 iframe \u5e94\u7528\u914d\u7f6e\u3002"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u8bf7\u6c42\uff1a"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 4,\n  "method": "sidebar_iframe/config"\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u54cd\u5e94\uff1a"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 4,\n  "result": {\n    "url": "https://your-app.example.com/tgo-plugin",\n    "title": "CRM \u7cfb\u7edf",\n    "icon": "users",\n    "width": 400,\n    "allow_fullscreen": true\n  }\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"channel_integrationmanifest",children:"channel_integration/manifest"}),"\n",(0,r.jsx)(e.p,{children:"\u83b7\u53d6\u7b2c\u4e09\u65b9\u5e73\u53f0\u96c6\u6210\u914d\u7f6e\u3002"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u8bf7\u6c42\uff1a"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 5,\n  "method": "channel_integration/manifest"\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u54cd\u5e94\uff1a"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 5,\n  "result": {\n    "channel_type": "custom_im",\n    "name": "\u81ea\u5b9a\u4e49IM\u5e73\u53f0",\n    "icon": "message-circle",\n    "config_schema": {\n      "type": "object",\n      "properties": {\n        "api_key": {\n          "type": "string",\n          "title": "API Key",\n          "description": "\u5e73\u53f0 API \u5bc6\u94a5"\n        },\n        "webhook_secret": {\n          "type": "string",\n          "title": "Webhook Secret",\n          "format": "password"\n        }\n      },\n      "required": ["api_key"]\n    },\n    "setup_guide": "# \u63a5\u5165\u6307\u5357\\n\\n1. \u767b\u5f55\u5e73\u53f0\u540e\u53f0...\\n2. \u521b\u5efa\u5e94\u7528...",\n    "webhook_endpoint": "/api/webhooks/custom-im"\n  }\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"json-action-\u7c7b\u578b\u53c2\u8003",children:"JSON-ACTION \u7c7b\u578b\u53c2\u8003"}),"\n",(0,r.jsx)(e.p,{children:"\u5f53\u5904\u7406\u7528\u6237\u4ea4\u4e92\u4e8b\u4ef6\u65f6\uff0c\u63d2\u4ef6\u8fd4\u56de JSON-ACTION \u6307\u793a\u5bbf\u4e3b\u6267\u884c\u64cd\u4f5c\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"\u652f\u6301\u7684-action-\u7c7b\u578b",children:"\u652f\u6301\u7684 ACTION \u7c7b\u578b"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"action"}),(0,r.jsx)(e.th,{children:"\u8bf4\u660e"}),(0,r.jsx)(e.th,{children:"\u9002\u7528\u573a\u666f"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"open_url"})}),(0,r.jsx)(e.td,{children:"\u6253\u5f00 URL \u94fe\u63a5"}),(0,r.jsx)(e.td,{children:"\u8df3\u8f6c\u5230\u5916\u90e8\u7cfb\u7edf"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"insert_text"})}),(0,r.jsx)(e.td,{children:"\u5728\u8f93\u5165\u6846\u63d2\u5165\u6587\u672c"}),(0,r.jsx)(e.td,{children:"\u5feb\u6377\u56de\u590d\u3001\u6a21\u677f\u63d2\u5165"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"send_message"})}),(0,r.jsx)(e.td,{children:"\u76f4\u63a5\u53d1\u9001\u6d88\u606f"}),(0,r.jsx)(e.td,{children:"\u81ea\u52a8\u56de\u590d"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"show_toast"})}),(0,r.jsx)(e.td,{children:"\u663e\u793a\u63d0\u793a\u6d88\u606f"}),(0,r.jsx)(e.td,{children:"\u64cd\u4f5c\u53cd\u9988"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"copy_text"})}),(0,r.jsx)(e.td,{children:"\u590d\u5236\u6587\u672c\u5230\u526a\u8d34\u677f"}),(0,r.jsx)(e.td,{children:"\u590d\u5236\u8ba2\u5355\u53f7\u7b49"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"refresh"})}),(0,r.jsx)(e.td,{children:"\u5237\u65b0\u5f53\u524d\u63d2\u4ef6 UI"}),(0,r.jsx)(e.td,{children:"\u6570\u636e\u66f4\u65b0\u540e\u5237\u65b0"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"close_modal"})}),(0,r.jsx)(e.td,{children:"\u5173\u95ed\u5f39\u7a97"}),(0,r.jsx)(e.td,{children:"\u53d6\u6d88\u64cd\u4f5c"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"noop"})}),(0,r.jsx)(e.td,{children:"\u65e0\u64cd\u4f5c"}),(0,r.jsx)(e.td,{children:"\u4ec5\u8bb0\u5f55\uff0c\u4e0d\u6267\u884c"})]})]})]}),"\n",(0,r.jsx)(e.h3,{id:"action-\u8be6\u7ec6\u8bf4\u660e",children:"ACTION \u8be6\u7ec6\u8bf4\u660e"}),"\n",(0,r.jsx)(e.h4,{id:"open_url",children:"open_url"}),"\n",(0,r.jsx)(e.p,{children:"\u6253\u5f00 URL \u94fe\u63a5\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "action": "open_url",\n  "data": {\n    "url": "https://crm.example.com/customers/12345",\n    "target": "_blank"\n  }\n}\n'})}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u5b57\u6bb5"}),(0,r.jsx)(e.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(e.th,{children:"\u5fc5\u586b"}),(0,r.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"url"})}),(0,r.jsx)(e.td,{children:"string"}),(0,r.jsx)(e.td,{children:"\u662f"}),(0,r.jsx)(e.td,{children:"\u8981\u6253\u5f00\u7684 URL"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"target"})}),(0,r.jsx)(e.td,{children:"string"}),(0,r.jsx)(e.td,{children:"\u5426"}),(0,r.jsxs)(e.td,{children:[(0,r.jsx)(e.code,{children:"_blank"}),"\uff08\u65b0\u6807\u7b7e\u9875\uff09\u6216 ",(0,r.jsx)(e.code,{children:"_self"}),"\uff08\u5f53\u524d\u9875\uff09"]})]})]})]}),"\n",(0,r.jsx)(e.h4,{id:"insert_text",children:"insert_text"}),"\n",(0,r.jsx)(e.p,{children:"\u5728\u5ba2\u670d\u8f93\u5165\u6846\u4e2d\u63d2\u5165\u6587\u672c\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "action": "insert_text",\n  "data": {\n    "text": "\u60a8\u597d\uff0c\u8ba2\u5355\u4e00\u822c3-5\u4e2a\u5de5\u4f5c\u65e5\u53d1\u8d27\u3002",\n    "replace": false\n  }\n}\n'})}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u5b57\u6bb5"}),(0,r.jsx)(e.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(e.th,{children:"\u5fc5\u586b"}),(0,r.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"text"})}),(0,r.jsx)(e.td,{children:"string"}),(0,r.jsx)(e.td,{children:"\u662f"}),(0,r.jsx)(e.td,{children:"\u8981\u63d2\u5165\u7684\u6587\u672c\u5185\u5bb9"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"replace"})}),(0,r.jsx)(e.td,{children:"boolean"}),(0,r.jsx)(e.td,{children:"\u5426"}),(0,r.jsxs)(e.td,{children:["\u662f\u5426\u66ff\u6362\u73b0\u6709\u5185\u5bb9\uff0c\u9ed8\u8ba4 ",(0,r.jsx)(e.code,{children:"false"})," \u8ffd\u52a0"]})]})]})]}),"\n",(0,r.jsx)(e.h4,{id:"send_message",children:"send_message"}),"\n",(0,r.jsx)(e.p,{children:"\u76f4\u63a5\u53d1\u9001\u6d88\u606f\u7ed9\u8bbf\u5ba2\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "action": "send_message",\n  "data": {\n    "content": "\u611f\u8c22\u60a8\u7684\u54a8\u8be2\uff01",\n    "content_type": "text"\n  }\n}\n'})}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u5b57\u6bb5"}),(0,r.jsx)(e.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(e.th,{children:"\u5fc5\u586b"}),(0,r.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"content"})}),(0,r.jsx)(e.td,{children:"string"}),(0,r.jsx)(e.td,{children:"\u662f"}),(0,r.jsx)(e.td,{children:"\u6d88\u606f\u5185\u5bb9"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"content_type"})}),(0,r.jsx)(e.td,{children:"string"}),(0,r.jsx)(e.td,{children:"\u5426"}),(0,r.jsxs)(e.td,{children:["\u6d88\u606f\u7c7b\u578b\uff1a",(0,r.jsx)(e.code,{children:"text"})," / ",(0,r.jsx)(e.code,{children:"markdown"})]})]})]})]}),"\n",(0,r.jsx)(e.h4,{id:"show_toast",children:"show_toast"}),"\n",(0,r.jsx)(e.p,{children:"\u663e\u793a\u63d0\u793a\u6d88\u606f\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "action": "show_toast",\n  "data": {\n    "message": "\u64cd\u4f5c\u6210\u529f\uff01",\n    "type": "success",\n    "duration": 3000\n  }\n}\n'})}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u5b57\u6bb5"}),(0,r.jsx)(e.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(e.th,{children:"\u5fc5\u586b"}),(0,r.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"message"})}),(0,r.jsx)(e.td,{children:"string"}),(0,r.jsx)(e.td,{children:"\u662f"}),(0,r.jsx)(e.td,{children:"\u63d0\u793a\u5185\u5bb9"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"type"})}),(0,r.jsx)(e.td,{children:"string"}),(0,r.jsx)(e.td,{children:"\u5426"}),(0,r.jsxs)(e.td,{children:["\u7c7b\u578b\uff1a",(0,r.jsx)(e.code,{children:"success"})," / ",(0,r.jsx)(e.code,{children:"error"})," / ",(0,r.jsx)(e.code,{children:"warning"})," / ",(0,r.jsx)(e.code,{children:"info"})]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"duration"})}),(0,r.jsx)(e.td,{children:"number"}),(0,r.jsx)(e.td,{children:"\u5426"}),(0,r.jsx)(e.td,{children:"\u663e\u793a\u65f6\u957f\uff08\u6beb\u79d2\uff09\uff0c\u9ed8\u8ba4 3000"})]})]})]}),"\n",(0,r.jsx)(e.h4,{id:"copy_text",children:"copy_text"}),"\n",(0,r.jsx)(e.p,{children:"\u590d\u5236\u6587\u672c\u5230\u526a\u8d34\u677f\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "action": "copy_text",\n  "data": {\n    "text": "ORD-2024001234",\n    "toast": "\u8ba2\u5355\u53f7\u5df2\u590d\u5236"\n  }\n}\n'})}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u5b57\u6bb5"}),(0,r.jsx)(e.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(e.th,{children:"\u5fc5\u586b"}),(0,r.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"text"})}),(0,r.jsx)(e.td,{children:"string"}),(0,r.jsx)(e.td,{children:"\u662f"}),(0,r.jsx)(e.td,{children:"\u8981\u590d\u5236\u7684\u6587\u672c"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"toast"})}),(0,r.jsx)(e.td,{children:"string"}),(0,r.jsx)(e.td,{children:"\u5426"}),(0,r.jsx)(e.td,{children:"\u590d\u5236\u6210\u529f\u540e\u7684\u63d0\u793a\u6587\u672c"})]})]})]}),"\n",(0,r.jsx)(e.h4,{id:"refresh",children:"refresh"}),"\n",(0,r.jsx)(e.p,{children:"\u5237\u65b0\u5f53\u524d\u63d2\u4ef6\u7684 UI\uff0c\u91cd\u65b0\u89e6\u53d1 render \u8bf7\u6c42\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "action": "refresh",\n  "data": {}\n}\n'})}),"\n",(0,r.jsx)(e.h4,{id:"close_modal",children:"close_modal"}),"\n",(0,r.jsx)(e.p,{children:"\u5173\u95ed\u5f53\u524d\u663e\u793a\u7684\u5f39\u7a97\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "action": "close_modal",\n  "data": {}\n}\n'})}),"\n",(0,r.jsx)(e.h4,{id:"noop",children:"noop"}),"\n",(0,r.jsx)(e.p,{children:"\u65e0\u64cd\u4f5c\uff0c\u7528\u4e8e\u4ec5\u8bb0\u5f55\u7528\u6237\u884c\u4e3a\u4f46\u4e0d\u6267\u884c\u4efb\u4f55\u52a8\u4f5c\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "action": "noop",\n  "data": {\n    "log": "\u7528\u6237\u70b9\u51fb\u4e86\u53d6\u6d88\u6309\u94ae"\n  }\n}\n'})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.h2,{id:"\u9519\u8bef\u5904\u7406\u6700\u4f73\u5b9e\u8df5",children:"\u9519\u8bef\u5904\u7406\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,r.jsx)(e.h3,{id:"1-\u8d85\u65f6\u5904\u7406",children:"1. \u8d85\u65f6\u5904\u7406"}),"\n",(0,r.jsx)(e.p,{children:"\u5bbf\u4e3b\u7a0b\u5e8f\u5bf9\u6bcf\u4e2a\u8bf7\u6c42\u8bbe\u6709\u9ed8\u8ba4\u8d85\u65f6\uff0830\u79d2\uff09\uff0c\u63d2\u4ef6\u5e94\u786e\u4fdd\u53ca\u65f6\u54cd\u5e94\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"2-\u4f18\u96c5\u964d\u7ea7",children:"2. \u4f18\u96c5\u964d\u7ea7"}),"\n",(0,r.jsx)(e.p,{children:"\u5f53\u63d2\u4ef6\u65e0\u6cd5\u83b7\u53d6\u6570\u636e\u65f6\uff0c\u5e94\u8fd4\u56de\u53cb\u597d\u7684\u9519\u8bef\u4fe1\u606f\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 2,\n  "result": {\n    "template": "text",\n    "data": {\n      "text": "\u6682\u65f6\u65e0\u6cd5\u83b7\u53d6\u8ba2\u5355\u4fe1\u606f",\n      "type": "warning"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"3-\u4e1a\u52a1\u9519\u8bef\u7801",children:"3. \u4e1a\u52a1\u9519\u8bef\u7801"}),"\n",(0,r.jsxs)(e.p,{children:["\u5efa\u8bae\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"-32000"})," \u5230 ",(0,r.jsx)(e.code,{children:"-32099"})," \u8303\u56f4\u7684\u9519\u8bef\u7801\uff1a"]}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u9519\u8bef\u7801"}),(0,r.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"-32000"})}),(0,r.jsx)(e.td,{children:"\u670d\u52a1\u6682\u4e0d\u53ef\u7528"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"-32001"})}),(0,r.jsx)(e.td,{children:"\u8ba4\u8bc1\u5931\u8d25"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"-32002"})}),(0,r.jsx)(e.td,{children:"\u6743\u9650\u4e0d\u8db3"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"-32003"})}),(0,r.jsx)(e.td,{children:"\u8d44\u6e90\u4e0d\u5b58\u5728"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"-32004"})}),(0,r.jsx)(e.td,{children:"\u8bf7\u6c42\u9891\u7387\u9650\u5236"})]})]})]}),"\n",(0,r.jsx)(e.h2,{id:"\u7f16\u7801\u8981\u6c42",children:"\u7f16\u7801\u8981\u6c42"}),"\n",(0,r.jsx)(e.h3,{id:"\u5b57\u7b26\u7f16\u7801",children:"\u5b57\u7b26\u7f16\u7801"}),"\n",(0,r.jsxs)(e.p,{children:["\u6240\u6709\u6d88\u606f\u5fc5\u987b\u4f7f\u7528 ",(0,r.jsx)(e.strong,{children:"UTF-8"})," \u7f16\u7801\u3002"]}),"\n",(0,r.jsx)(e.h3,{id:"\u6362\u884c\u7b26",children:"\u6362\u884c\u7b26"}),"\n",(0,r.jsxs)(e.p,{children:["\u6d88\u606f\u5fc5\u987b\u4ee5 ",(0,r.jsx)(e.code,{children:"\\n"}),"\uff08LF\uff09\u7ed3\u5c3e\uff0c\u4e0d\u652f\u6301 ",(0,r.jsx)(e.code,{children:"\\r\\n"}),"\uff08CRLF\uff09\u3002"]}),"\n",(0,r.jsx)(e.h3,{id:"json-\u683c\u5f0f",children:"JSON \u683c\u5f0f"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4e0d\u5141\u8bb8\u6709\u5c3e\u968f\u9017\u53f7"}),"\n",(0,r.jsx)(e.li,{children:"\u4e0d\u5141\u8bb8\u6709\u6ce8\u91ca"}),"\n",(0,r.jsx)(e.li,{children:"\u5b57\u7b26\u4e32\u4f7f\u7528\u53cc\u5f15\u53f7"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u4e0b\u4e00\u6b65",children:"\u4e0b\u4e00\u6b65"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"/plugin/extension-points",children:"\u53ef\u63d2\u70b9\u8be6\u89e3"})," - \u4e86\u89e3\u6bcf\u4e2a\u53ef\u63d2\u70b9\u7684\u5177\u4f53\u7528\u6cd5"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"/plugin/templates",children:"\u6a21\u7248\u89c4\u8303"})," - \u5b66\u4e60\u5982\u4f55\u5b9a\u4e49 UI \u6a21\u7248"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.a,{href:"/plugin/examples",children:"\u5b8c\u6574\u793a\u4f8b"})," - \u67e5\u770b\u5b8c\u6574\u7684\u63d2\u4ef6\u5b9e\u73b0"]}),"\n"]})]})}function x(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(j,{...n})}):j(n)}}}]);