"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[7683],{73457:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>d,default:()=>o,frontMatter:()=>l,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"plugin/extension-points","title":"\u53ef\u63d2\u70b9\u8be6\u89e3","description":"TGO \u63d0\u4f9b\u56db\u4e2a\u53ef\u63d2\u70b9\uff0c\u5141\u8bb8\u63d2\u4ef6\u5728\u4e0d\u540c\u4f4d\u7f6e\u6269\u5c55\u5ba2\u670d\u7cfb\u7edf\u529f\u80fd\u3002\u672c\u6587\u6863\u8be6\u7ec6\u4ecb\u7ecd\u6bcf\u4e2a\u53ef\u63d2\u70b9\u7684\u4f7f\u7528\u573a\u666f\u3001\u8f93\u5165\u8f93\u51fa\u548c\u5b9e\u73b0\u65b9\u5f0f\u3002","source":"@site/docs/plugin/extension-points.md","sourceDirName":"plugin","slug":"/plugin/extension-points","permalink":"/en/plugin/extension-points","draft":false,"unlisted":false,"editUrl":"https://github.com/tgoai/tgo/edit/main/docs-site/docs/plugin/extension-points.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"extension-points","title":"\u53ef\u63d2\u70b9\u8be6\u89e3","sidebar_position":4},"sidebar":"pluginSidebar","previous":{"title":"\u901a\u8baf\u534f\u8bae","permalink":"/en/plugin/protocol"},"next":{"title":"\u6a21\u7248\u89c4\u8303","permalink":"/en/plugin/templates"}}');var t=s(74848),r=s(28453);const l={id:"extension-points",title:"\u53ef\u63d2\u70b9\u8be6\u89e3",sidebar_position:4},d="\u53ef\u63d2\u70b9\u8be6\u89e3",c={},a=[{value:"\u4ea4\u4e92\u6a21\u5f0f",id:"\u4ea4\u4e92\u6a21\u5f0f",level:2},{value:"\u8bbf\u5ba2\u9762\u677f\uff08visitor_panel\uff09",id:"\u8bbf\u5ba2\u9762\u677fvisitor_panel",level:2},{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:3},{value:"\u80fd\u529b\u58f0\u660e",id:"\u80fd\u529b\u58f0\u660e",level:3},{value:"\u8bf7\u6c42\u53c2\u6570",id:"\u8bf7\u6c42\u53c2\u6570",level:3},{value:"\u54cd\u5e94\u683c\u5f0f",id:"\u54cd\u5e94\u683c\u5f0f",level:3},{value:"\u4e8b\u4ef6\u5904\u7406",id:"\u4e8b\u4ef6\u5904\u7406",level:3},{value:"\u4f7f\u7528\u573a\u666f",id:"\u4f7f\u7528\u573a\u666f",level:3},{value:"\u5b8c\u6574\u4ea4\u4e92\u6d41\u7a0b\u793a\u4f8b",id:"\u5b8c\u6574\u4ea4\u4e92\u6d41\u7a0b\u793a\u4f8b",level:3},{value:"\u804a\u5929\u5de5\u5177\u680f\uff08chat_toolbar\uff09",id:"\u804a\u5929\u5de5\u5177\u680fchat_toolbar",level:2},{value:"\u6982\u8ff0",id:"\u6982\u8ff0-1",level:3},{value:"\u80fd\u529b\u58f0\u660e",id:"\u80fd\u529b\u58f0\u660e-1",level:3},{value:"\u6e32\u67d3\u8bf7\u6c42",id:"\u6e32\u67d3\u8bf7\u6c42",level:3},{value:"\u4e8b\u4ef6\u5904\u7406",id:"\u4e8b\u4ef6\u5904\u7406-1",level:3},{value:"\u5e38\u7528 ACTION \u7c7b\u578b",id:"\u5e38\u7528-action-\u7c7b\u578b",level:3},{value:"insert_text",id:"insert_text",level:4},{value:"send_message",id:"send_message",level:4},{value:"open_url",id:"open_url",level:4},{value:"\u8868\u5355\u4ea4\u4e92\u793a\u4f8b",id:"\u8868\u5355\u4ea4\u4e92\u793a\u4f8b",level:3},{value:"\u5b8c\u6574\u4ea4\u4e92\u6d41\u7a0b\u793a\u4f8b",id:"\u5b8c\u6574\u4ea4\u4e92\u6d41\u7a0b\u793a\u4f8b-1",level:3},{value:"iframe \u5e94\u7528\uff08sidebar_iframe\uff09",id:"iframe-\u5e94\u7528sidebar_iframe",level:2},{value:"\u6982\u8ff0",id:"\u6982\u8ff0-2",level:3},{value:"\u80fd\u529b\u58f0\u660e",id:"\u80fd\u529b\u58f0\u660e-2",level:3},{value:"\u521d\u59cb\u5316\u914d\u7f6e",id:"\u521d\u59cb\u5316\u914d\u7f6e",level:3},{value:"iframe \u901a\u8baf",id:"iframe-\u901a\u8baf",level:3},{value:"iframe \u5411\u5bbf\u4e3b\u53d1\u9001\u6d88\u606f",id:"iframe-\u5411\u5bbf\u4e3b\u53d1\u9001\u6d88\u606f",level:4},{value:"\u5bbf\u4e3b\u5411 iframe \u53d1\u9001\u6d88\u606f",id:"\u5bbf\u4e3b\u5411-iframe-\u53d1\u9001\u6d88\u606f",level:4},{value:"\u5b8c\u6574\u7684 iframe \u5e94\u7528\u793a\u4f8b",id:"\u5b8c\u6574\u7684-iframe-\u5e94\u7528\u793a\u4f8b",level:4},{value:"\u7b2c\u4e09\u65b9\u5e73\u53f0\u63a5\u5165\uff08channel_integration\uff09",id:"\u7b2c\u4e09\u65b9\u5e73\u53f0\u63a5\u5165channel_integration",level:2},{value:"\u6982\u8ff0",id:"\u6982\u8ff0-3",level:3},{value:"\u80fd\u529b\u58f0\u660e",id:"\u80fd\u529b\u58f0\u660e-3",level:3},{value:"\u914d\u7f6e\u6e05\u5355",id:"\u914d\u7f6e\u6e05\u5355",level:3},{value:"\u914d\u7f6e\u8868\u5355 Schema",id:"\u914d\u7f6e\u8868\u5355-schema",level:3},{value:"\u6d88\u606f\u5904\u7406",id:"\u6d88\u606f\u5904\u7406",level:3},{value:"\u63a5\u6536\u6d88\u606f\uff08Webhook\uff09",id:"\u63a5\u6536\u6d88\u606fwebhook",level:4},{value:"\u53d1\u9001\u6d88\u606f",id:"\u53d1\u9001\u6d88\u606f",level:4},{value:"\u56fe\u6807\u53c2\u8003",id:"\u56fe\u6807\u53c2\u8003",level:2},{value:"\u4e0b\u4e00\u6b65",id:"\u4e0b\u4e00\u6b65",level:2}];function h(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"\u53ef\u63d2\u70b9\u8be6\u89e3",children:"\u53ef\u63d2\u70b9\u8be6\u89e3"})}),"\n",(0,t.jsx)(e.p,{children:"TGO \u63d0\u4f9b\u56db\u4e2a\u53ef\u63d2\u70b9\uff0c\u5141\u8bb8\u63d2\u4ef6\u5728\u4e0d\u540c\u4f4d\u7f6e\u6269\u5c55\u5ba2\u670d\u7cfb\u7edf\u529f\u80fd\u3002\u672c\u6587\u6863\u8be6\u7ec6\u4ecb\u7ecd\u6bcf\u4e2a\u53ef\u63d2\u70b9\u7684\u4f7f\u7528\u573a\u666f\u3001\u8f93\u5165\u8f93\u51fa\u548c\u5b9e\u73b0\u65b9\u5f0f\u3002"}),"\n",(0,t.jsx)(e.h2,{id:"\u4ea4\u4e92\u6a21\u5f0f",children:"\u4ea4\u4e92\u6a21\u5f0f"}),"\n",(0,t.jsxs)(e.p,{children:["\u6240\u6709\u53ef\u63d2\u70b9\u90fd\u9075\u5faa\u7edf\u4e00\u7684\u300c",(0,t.jsx)(e.strong,{children:"\u6e32\u67d3-\u4e8b\u4ef6"}),"\u300d\u4ea4\u4e92\u6a21\u5f0f\uff1a"]}),"\n",(0,t.jsx)(e.mermaid,{value:"flowchart TB\n    subgraph Render[\u6e32\u67d3\u9636\u6bb5]\n        A[\u5bbf\u4e3b\u53d1\u9001 render \u8bf7\u6c42] --\x3e B[\u63d2\u4ef6\u8fd4\u56de JSON-UI]\n        B --\x3e C[\u5bbf\u4e3b\u6e32\u67d3\u754c\u9762]\n    end\n    \n    subgraph Event[\u4e8b\u4ef6\u9636\u6bb5]\n        D[\u7528\u6237\u70b9\u51fb\u6309\u94ae] --\x3e E[\u5bbf\u4e3b\u53d1\u9001 event \u8bf7\u6c42]\n        E --\x3e F[\u63d2\u4ef6\u8fd4\u56de JSON-ACTION]\n        F --\x3e G[\u5bbf\u4e3b\u6267\u884c\u52a8\u4f5c]\n    end\n    \n    Render --\x3e D"}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"\u65b9\u6cd5"}),(0,t.jsx)(e.th,{children:"\u89e6\u53d1\u65f6\u673a"}),(0,t.jsx)(e.th,{children:"\u8fd4\u56de\u7c7b\u578b"}),(0,t.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"*/render"})}),(0,t.jsx)(e.td,{children:"\u754c\u9762\u9700\u8981\u6e32\u67d3\u65f6"}),(0,t.jsx)(e.td,{children:"JSON-UI"}),(0,t.jsx)(e.td,{children:"\u63cf\u8ff0 UI \u7ed3\u6784"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"*/event"})}),(0,t.jsx)(e.td,{children:"\u7528\u6237\u4ea4\u4e92\u65f6"}),(0,t.jsx)(e.td,{children:"JSON-ACTION"}),(0,t.jsx)(e.td,{children:"\u6307\u793a\u6267\u884c\u7684\u64cd\u4f5c"})]})]})]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"\u8bbf\u5ba2\u9762\u677fvisitor_panel",children:"\u8bbf\u5ba2\u9762\u677f\uff08visitor_panel\uff09"}),"\n",(0,t.jsx)(e.h3,{id:"\u6982\u8ff0",children:"\u6982\u8ff0"}),"\n",(0,t.jsx)(e.p,{children:"\u5728\u804a\u5929\u754c\u9762\u53f3\u4fa7\u7684\u8bbf\u5ba2\u4fe1\u606f\u9762\u677f\u4e2d\u6dfb\u52a0\u81ea\u5b9a\u4e49\u5185\u5bb9\u5757\u3002\u9002\u7528\u4e8e\u5c55\u793a\u4e0e\u8bbf\u5ba2\u76f8\u5173\u7684\u4e1a\u52a1\u6570\u636e\uff0c\u5982\u8ba2\u5355\u4fe1\u606f\u3001CRM \u6570\u636e\u3001\u4f1a\u5458\u7b49\u7ea7\u7b49\u3002"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u804a\u5929\u754c\u9762                                                \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502 \u2502                       \u2502 \u2502  \u8bbf\u5ba2\u9762\u677f                \u2502  \u2502\n\u2502 \u2502     \u804a\u5929\u6d88\u606f\u533a\u57df       \u2502 \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502  \u2502\n\u2502 \u2502                       \u2502 \u2502  \u2502 \u57fa\u672c\u4fe1\u606f          \u2502  \u2502  \u2502\n\u2502 \u2502                       \u2502 \u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524  \u2502  \u2502\n\u2502 \u2502                       \u2502 \u2502  \u2502 \ud83d\udd0c \u63d2\u4ef6\u5185\u5bb9\u5757 1   \u2502  \u2502  \u2502\n\u2502 \u2502                       \u2502 \u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524  \u2502  \u2502\n\u2502 \u2502                       \u2502 \u2502  \u2502 \ud83d\udd0c \u63d2\u4ef6\u5185\u5bb9\u5757 2   \u2502  \u2502  \u2502\n\u2502 \u2502                       \u2502 \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502  \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\u80fd\u529b\u58f0\u660e",children:"\u80fd\u529b\u58f0\u660e"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "type": "visitor_panel",\n  "title": "\u5ba2\u6237\u8ba2\u5355",\n  "icon": "shopping-cart",\n  "priority": 10,\n  "refresh_on": ["session_change", "manual"]\n}\n'})}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"\u5b57\u6bb5"}),(0,t.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"title"})}),(0,t.jsx)(e.td,{children:"\u9762\u677f\u5757\u6807\u9898"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"icon"})}),(0,t.jsx)(e.td,{children:"\u56fe\u6807\uff08Lucide \u56fe\u6807\u540d\uff09"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"priority"})}),(0,t.jsx)(e.td,{children:"\u6392\u5e8f\u4f18\u5148\u7ea7\uff08\u6570\u5b57\u8d8a\u5c0f\u8d8a\u9760\u524d\uff09"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"refresh_on"})}),(0,t.jsx)(e.td,{children:"\u5237\u65b0\u89e6\u53d1\u6761\u4ef6"})]})]})]}),"\n",(0,t.jsx)(e.h3,{id:"\u8bf7\u6c42\u53c2\u6570",children:"\u8bf7\u6c42\u53c2\u6570"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "method": "visitor_panel/render",\n  "params": {\n    "visitor_id": "v_abc123",\n    "session_id": "s_xyz789",\n    "visitor": {\n      "name": "\u5f20\u4e09",\n      "email": "zhangsan@example.com",\n      "phone": "138****1234",\n      "avatar": "https://...",\n      "first_seen_at": "2024-01-15T10:30:00Z",\n      "last_seen_at": "2024-12-27T14:20:00Z",\n      "metadata": {\n        "user_id": "u_12345",\n        "vip_level": 3,\n        "tags": ["vip", "enterprise"]\n      }\n    },\n    "context": {\n      "current_page": "https://example.com/products/123",\n      "referrer": "https://google.com",\n      "device": "desktop",\n      "browser": "Chrome",\n      "location": {\n        "country": "CN",\n        "city": "\u4e0a\u6d77"\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u54cd\u5e94\u683c\u5f0f",children:"\u54cd\u5e94\u683c\u5f0f"}),"\n",(0,t.jsx)(e.p,{children:"\u63d2\u4ef6\u8fd4\u56de JSON \u6a21\u7248\u6570\u636e\uff0c\u7531\u5bbf\u4e3b\u6e32\u67d3 UI\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "result": {\n    "template": "key_value",\n    "data": {\n      "title": "\u4f1a\u5458\u4fe1\u606f",\n      "items": [\n        {"label": "\u4f1a\u5458\u7b49\u7ea7", "value": "\u9ec4\u91d1\u4f1a\u5458", "icon": "crown"},\n        {"label": "\u7d2f\u8ba1\u6d88\u8d39", "value": "\xa512,580.00"},\n        {"label": "\u79ef\u5206\u4f59\u989d", "value": "3,200 \u5206"}\n      ]\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u4e8b\u4ef6\u5904\u7406",children:"\u4e8b\u4ef6\u5904\u7406"}),"\n",(0,t.jsx)(e.p,{children:"\u5f53\u7528\u6237\u70b9\u51fb JSON-UI \u4e2d\u7684\u6309\u94ae\u65f6\uff0c\u5bbf\u4e3b\u53d1\u9001\u4e8b\u4ef6\u8bf7\u6c42\uff1a"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u8bf7\u6c42\uff08visitor_panel/event\uff09\uff1a"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "method": "visitor_panel/event",\n  "params": {\n    "event_type": "button_click",\n    "action_id": "view_in_crm",\n    "visitor_id": "v_abc123",\n    "session_id": "s_xyz789",\n    "payload": {}\n  }\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u54cd\u5e94\uff08JSON-ACTION\uff09\uff1a"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "result": {\n    "action": "open_url",\n    "data": {\n      "url": "https://crm.example.com/customers/v_abc123",\n      "target": "_blank"\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u4f7f\u7528\u573a\u666f",children:"\u4f7f\u7528\u573a\u666f"}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"\u573a\u666f"}),(0,t.jsx)(e.th,{children:"\u6a21\u7248\u7c7b\u578b"}),(0,t.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"\u663e\u793a CRM \u5ba2\u6237\u4fe1\u606f"}),(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"key_value"})}),(0,t.jsx)(e.td,{children:"\u5c55\u793a\u5ba2\u6237\u6863\u6848"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"\u5c55\u793a\u5386\u53f2\u8ba2\u5355"}),(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"table"})}),(0,t.jsx)(e.td,{children:"\u8868\u683c\u5c55\u793a\u8ba2\u5355\u5217\u8868"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"\u663e\u793a\u4f1a\u5458\u5361\u7247"}),(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"card"})}),(0,t.jsx)(e.td,{children:"\u5361\u7247\u5f0f\u5c55\u793a\u4f1a\u5458\u4fe1\u606f"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"\u8df3\u8f6c\u5916\u90e8\u7cfb\u7edf"}),(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"link"})}),(0,t.jsx)(e.td,{children:"\u63d0\u4f9b\u8df3\u8f6c\u94fe\u63a5"})]})]})]}),"\n",(0,t.jsx)(e.h3,{id:"\u5b8c\u6574\u4ea4\u4e92\u6d41\u7a0b\u793a\u4f8b",children:"\u5b8c\u6574\u4ea4\u4e92\u6d41\u7a0b\u793a\u4f8b"}),"\n",(0,t.jsx)(e.mermaid,{value:'sequenceDiagram\n    participant User as \u5ba2\u670d\u4eba\u5458\n    participant Host as TGO \u5bbf\u4e3b\n    participant Plugin as CRM \u63d2\u4ef6\n    \n    Note over Host,Plugin: \u6e32\u67d3\u9636\u6bb5\n    Host->>Plugin: visitor_panel/render\n    Plugin--\x3e>Host: JSON-UI (\u5ba2\u6237\u4fe1\u606f+\u6309\u94ae)\n    Host->>User: \u663e\u793a\u5ba2\u6237\u4fe1\u606f\u9762\u677f\n    \n    Note over Host,Plugin: \u4e8b\u4ef6\u9636\u6bb5\n    User->>Host: \u70b9\u51fb"\u67e5\u770bCRM"\u6309\u94ae\n    Host->>Plugin: visitor_panel/event (action_id: view_in_crm)\n    Plugin--\x3e>Host: JSON-ACTION (open_url)\n    Host->>User: \u6253\u5f00 CRM \u9875\u9762'}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"\u804a\u5929\u5de5\u5177\u680fchat_toolbar",children:"\u804a\u5929\u5de5\u5177\u680f\uff08chat_toolbar\uff09"}),"\n",(0,t.jsx)(e.h3,{id:"\u6982\u8ff0-1",children:"\u6982\u8ff0"}),"\n",(0,t.jsx)(e.p,{children:"\u5728\u8f93\u5165\u6846\u4e0a\u65b9\u7684\u5de5\u5177\u680f\u6dfb\u52a0\u81ea\u5b9a\u4e49\u6309\u94ae\u3002\u70b9\u51fb\u6309\u94ae\u65f6\u89e6\u53d1\u63d2\u4ef6\u52a8\u4f5c\uff0c\u53ef\u7528\u4e8e\u5feb\u6377\u56de\u590d\u3001\u77e5\u8bc6\u5e93\u67e5\u8be2\u3001AI \u8f85\u52a9\u7b49\u529f\u80fd\u3002"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502           \u804a\u5929\u6d88\u606f\u533a\u57df              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 [\ud83d\udcce] [\ud83d\ude0a] [\ud83d\udcf7] [\ud83d\udd0c\u63d2\u4ef61] [\ud83d\udd0c\u63d2\u4ef62]  \u2502  \u2190 \u5de5\u5177\u680f\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 \u8f93\u5165\u6846...                           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\u80fd\u529b\u58f0\u660e-1",children:"\u80fd\u529b\u58f0\u660e"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "type": "chat_toolbar",\n  "title": "\u5feb\u6377\u56de\u590d",\n  "icon": "zap",\n  "tooltip": "\u9009\u62e9\u5feb\u6377\u56de\u590d\u6a21\u677f",\n  "shortcut": "Ctrl+Shift+R"\n}\n'})}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"\u5b57\u6bb5"}),(0,t.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"title"})}),(0,t.jsx)(e.td,{children:"\u6309\u94ae\u6807\u9898"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"icon"})}),(0,t.jsx)(e.td,{children:"\u6309\u94ae\u56fe\u6807"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"tooltip"})}),(0,t.jsx)(e.td,{children:"\u9f20\u6807\u60ac\u505c\u63d0\u793a"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"shortcut"})}),(0,t.jsx)(e.td,{children:"\u5feb\u6377\u952e"})]})]})]}),"\n",(0,t.jsx)(e.h3,{id:"\u6e32\u67d3\u8bf7\u6c42",children:"\u6e32\u67d3\u8bf7\u6c42"}),"\n",(0,t.jsx)(e.p,{children:"\u5f53\u7528\u6237\u70b9\u51fb\u5de5\u5177\u680f\u6309\u94ae\u65f6\uff0c\u5bbf\u4e3b\u53d1\u9001\u6e32\u67d3\u8bf7\u6c42\uff1a"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u8bf7\u6c42\uff08chat_toolbar/render\uff09\uff1a"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "method": "chat_toolbar/render",\n  "params": {\n    "action_id": "quick_reply",\n    "session_id": "s_xyz789",\n    "visitor_id": "v_abc123",\n    "agent_id": "a_agent01",\n    "context": {\n      "last_messages": [\n        {\n          "role": "visitor",\n          "content": "\u8bf7\u95ee\u53d1\u8d27\u65f6\u95f4\u662f\u591a\u4e45\uff1f",\n          "timestamp": "2024-12-27T14:25:00Z"\n        }\n      ],\n      "input_text": ""\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u54cd\u5e94\uff08JSON-UI\uff09\uff1a"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "result": {\n    "template": "list",\n    "data": {\n      "title": "\u5feb\u6377\u56de\u590d",\n      "searchable": true,\n      "items": [\n        {"id": "r1", "text": "\u611f\u8c22\u60a8\u7684\u54a8\u8be2\uff0c\u8bf7\u95ee\u6709\u4ec0\u4e48\u53ef\u4ee5\u5e2e\u60a8\uff1f"},\n        {"id": "r2", "text": "\u8ba2\u5355\u4e00\u822c3-5\u4e2a\u5de5\u4f5c\u65e5\u53d1\u8d27"},\n        {"id": "r3", "text": "\u5982\u6709\u95ee\u9898\u53ef\u968f\u65f6\u8054\u7cfb\u6211\u4eec"}\n      ]\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u4e8b\u4ef6\u5904\u7406-1",children:"\u4e8b\u4ef6\u5904\u7406"}),"\n",(0,t.jsx)(e.p,{children:"\u5f53\u7528\u6237\u5728\u6e32\u67d3\u7684 UI \u4e2d\u8fdb\u884c\u64cd\u4f5c\u65f6\uff0c\u5bbf\u4e3b\u53d1\u9001\u4e8b\u4ef6\u8bf7\u6c42\uff1a"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u8bf7\u6c42\uff08chat_toolbar/event\uff09\uff1a"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "method": "chat_toolbar/event",\n  "params": {\n    "event_type": "item_select",\n    "action_id": "quick_reply",\n    "selected_id": "r2",\n    "session_id": "s_xyz789",\n    "visitor_id": "v_abc123"\n  }\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u54cd\u5e94\uff08JSON-ACTION\uff09\uff1a"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "result": {\n    "action": "insert_text",\n    "data": {\n      "text": "\u8ba2\u5355\u4e00\u822c3-5\u4e2a\u5de5\u4f5c\u65e5\u53d1\u8d27",\n      "replace": false\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u5e38\u7528-action-\u7c7b\u578b",children:"\u5e38\u7528 ACTION \u7c7b\u578b"}),"\n",(0,t.jsx)(e.h4,{id:"insert_text",children:"insert_text"}),"\n",(0,t.jsx)(e.p,{children:"\u5728\u8f93\u5165\u6846\u63d2\u5165\u6587\u672c\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "action": "insert_text",\n  "data": {\n    "text": "\u60a8\u597d\uff0c\u8ba2\u5355\u4e00\u822c3-5\u4e2a\u5de5\u4f5c\u65e5\u53d1\u8d27\u3002",\n    "replace": false\n  }\n}\n'})}),"\n",(0,t.jsx)(e.h4,{id:"send_message",children:"send_message"}),"\n",(0,t.jsx)(e.p,{children:"\u76f4\u63a5\u53d1\u9001\u6d88\u606f\u7ed9\u8bbf\u5ba2\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "action": "send_message",\n  "data": {\n    "content": "\u611f\u8c22\u60a8\u7684\u54a8\u8be2\uff01",\n    "content_type": "text"\n  }\n}\n'})}),"\n",(0,t.jsx)(e.h4,{id:"open_url",children:"open_url"}),"\n",(0,t.jsx)(e.p,{children:"\u6253\u5f00\u5916\u90e8\u94fe\u63a5\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "action": "open_url",\n  "data": {\n    "url": "https://crm.example.com/customers/12345",\n    "target": "_blank"\n  }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u8868\u5355\u4ea4\u4e92\u793a\u4f8b",children:"\u8868\u5355\u4ea4\u4e92\u793a\u4f8b"}),"\n",(0,t.jsx)(e.p,{children:"\u5f53\u9700\u8981\u663e\u793a\u8868\u5355\u65f6\uff0c\u5148\u8fd4\u56de\u8868\u5355 JSON-UI\uff1a"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u54cd\u5e94\uff08JSON-UI - \u8868\u5355\uff09\uff1a"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "result": {\n    "template": "form",\n    "data": {\n      "title": "\u521b\u5efa\u5de5\u5355",\n      "fields": [\n        {"name": "title", "label": "\u5de5\u5355\u6807\u9898", "type": "text", "required": true},\n        {"name": "priority", "label": "\u4f18\u5148\u7ea7", "type": "select", "options": [\n          {"value": "low", "label": "\u4f4e"},\n          {"value": "medium", "label": "\u4e2d"},\n          {"value": "high", "label": "\u9ad8"}\n        ]},\n        {"name": "description", "label": "\u63cf\u8ff0", "type": "textarea"}\n      ]\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:"\u5f53\u7528\u6237\u63d0\u4ea4\u8868\u5355\u540e\uff0c\u5bbf\u4e3b\u53d1\u9001\u4e8b\u4ef6\uff1a"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u8bf7\u6c42\uff08chat_toolbar/event - \u8868\u5355\u63d0\u4ea4\uff09\uff1a"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "method": "chat_toolbar/event",\n  "params": {\n    "event_type": "form_submit",\n    "action_id": "create_ticket",\n    "form_data": {\n      "title": "\u53d1\u8d27\u95ee\u9898",\n      "priority": "high",\n      "description": "\u5ba2\u6237\u53cd\u9988..."\n    },\n    "session_id": "s_xyz789"\n  }\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u54cd\u5e94\uff08JSON-ACTION\uff09\uff1a"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "result": {\n    "action": "show_toast",\n    "data": {\n      "message": "\u5de5\u5355\u521b\u5efa\u6210\u529f\uff01\u5de5\u5355\u53f7: TK-12345",\n      "type": "success"\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u5b8c\u6574\u4ea4\u4e92\u6d41\u7a0b\u793a\u4f8b-1",children:"\u5b8c\u6574\u4ea4\u4e92\u6d41\u7a0b\u793a\u4f8b"}),"\n",(0,t.jsx)(e.mermaid,{value:'sequenceDiagram\n    participant User as \u5ba2\u670d\u4eba\u5458\n    participant Host as TGO \u5bbf\u4e3b\n    participant Plugin as \u5feb\u6377\u56de\u590d\u63d2\u4ef6\n    \n    User->>Host: \u70b9\u51fb"\u5feb\u6377\u56de\u590d"\u6309\u94ae\n    Host->>Plugin: chat_toolbar/render\n    Plugin--\x3e>Host: JSON-UI (\u56de\u590d\u5217\u8868)\n    Host->>User: \u663e\u793a\u56de\u590d\u9009\u62e9\u5f39\u7a97\n    \n    User->>Host: \u9009\u62e9\u4e00\u6761\u56de\u590d\n    Host->>Plugin: chat_toolbar/event (item_select)\n    Plugin--\x3e>Host: JSON-ACTION (insert_text)\n    Host->>User: \u5728\u8f93\u5165\u6846\u63d2\u5165\u6587\u672c'}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"iframe-\u5e94\u7528sidebar_iframe",children:"iframe \u5e94\u7528\uff08sidebar_iframe\uff09"}),"\n",(0,t.jsx)(e.h3,{id:"\u6982\u8ff0-2",children:"\u6982\u8ff0"}),"\n",(0,t.jsx)(e.p,{children:"\u5728\u804a\u5929\u754c\u9762\u6700\u53f3\u4fa7\u6dfb\u52a0\u72ec\u7acb\u7684 iframe \u5e94\u7528\u3002\u9002\u7528\u4e8e\u96c6\u6210\u590d\u6742\u7684\u7b2c\u4e09\u65b9\u7cfb\u7edf\uff0c\u5982 CRM\u3001\u5de5\u5355\u7cfb\u7edf\u3001\u6570\u636e\u770b\u677f\u7b49\u3002"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u804a\u5929\u754c\u9762                                                        \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502 \u2502                  \u2502 \u2502            \u2502 \u2502                        \u2502  \u2502\n\u2502 \u2502    \u804a\u5929\u6d88\u606f       \u2502 \u2502  \u8bbf\u5ba2\u9762\u677f   \u2502 \u2502   \ud83d\udd0c iframe \u5e94\u7528       \u2502  \u2502\n\u2502 \u2502                  \u2502 \u2502            \u2502 \u2502   (CRM / \u5de5\u5355 / ...)   \u2502  \u2502\n\u2502 \u2502                  \u2502 \u2502            \u2502 \u2502                        \u2502  \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502                                      [\ud83d\udcca][\ud83d\udccb][\u2699\ufe0f] \u2190 \u5e94\u7528\u56fe\u6807\u680f   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\u80fd\u529b\u58f0\u660e-2",children:"\u80fd\u529b\u58f0\u660e"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "type": "sidebar_iframe",\n  "title": "CRM \u7cfb\u7edf",\n  "icon": "users",\n  "url": "https://your-crm.example.com/tgo-embed",\n  "width": 400,\n  "min_width": 300,\n  "max_width": 600,\n  "allow_fullscreen": true\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u521d\u59cb\u5316\u914d\u7f6e",children:"\u521d\u59cb\u5316\u914d\u7f6e"}),"\n",(0,t.jsx)(e.p,{children:"\u5bbf\u4e3b\u8bf7\u6c42 iframe \u914d\u7f6e\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "method": "sidebar_iframe/config"\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:"\u54cd\u5e94\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "result": {\n    "url": "https://your-app.example.com/tgo-plugin",\n    "title": "CRM \u7cfb\u7edf",\n    "icon": "users",\n    "width": 400,\n    "allow_fullscreen": true,\n    "sandbox": "allow-scripts allow-same-origin allow-forms",\n    "permissions": ["clipboard-read", "clipboard-write"]\n  }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"iframe-\u901a\u8baf",children:"iframe \u901a\u8baf"}),"\n",(0,t.jsxs)(e.p,{children:["iframe \u5185\u7684\u5e94\u7528\u901a\u8fc7 ",(0,t.jsx)(e.code,{children:"postMessage"})," \u4e0e\u5bbf\u4e3b\u901a\u8baf\uff1a"]}),"\n",(0,t.jsx)(e.h4,{id:"iframe-\u5411\u5bbf\u4e3b\u53d1\u9001\u6d88\u606f",children:"iframe \u5411\u5bbf\u4e3b\u53d1\u9001\u6d88\u606f"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-javascript",children:"// \u5728 iframe \u5185\nwindow.parent.postMessage({\n  type: 'tgo_plugin_message',\n  action: 'insert_text',\n  data: {\n    text: '\u4ece CRM \u63d2\u5165\u7684\u5185\u5bb9'\n  }\n}, '*');\n"})}),"\n",(0,t.jsx)(e.h4,{id:"\u5bbf\u4e3b\u5411-iframe-\u53d1\u9001\u6d88\u606f",children:"\u5bbf\u4e3b\u5411 iframe \u53d1\u9001\u6d88\u606f"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-javascript",children:"// \u5bbf\u4e3b\u4f1a\u81ea\u52a8\u53d1\u9001\u4e0a\u4e0b\u6587\u4fe1\u606f\n{\n  type: 'tgo_context_update',\n  data: {\n    visitor_id: 'v_abc123',\n    session_id: 's_xyz789',\n    visitor: { ... },\n    agent: { ... }\n  }\n}\n"})}),"\n",(0,t.jsx)(e.h4,{id:"\u5b8c\u6574\u7684-iframe-\u5e94\u7528\u793a\u4f8b",children:"\u5b8c\u6574\u7684 iframe \u5e94\u7528\u793a\u4f8b"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-html",children:"<!DOCTYPE html>\n<html>\n<head>\n  <title>CRM \u63d2\u4ef6</title>\n  <script>\n    let currentContext = null;\n\n    // \u76d1\u542c\u6765\u81ea\u5bbf\u4e3b\u7684\u6d88\u606f\n    window.addEventListener('message', (event) => {\n      const { type, data } = event.data;\n      \n      if (type === 'tgo_context_update') {\n        currentContext = data;\n        updateUI(data);\n      }\n    });\n\n    function updateUI(context) {\n      document.getElementById('visitor-name').textContent = \n        context.visitor?.name || '\u672a\u77e5\u8bbf\u5ba2';\n    }\n\n    // \u5411\u8f93\u5165\u6846\u63d2\u5165\u6587\u672c\n    function insertText(text) {\n      window.parent.postMessage({\n        type: 'tgo_plugin_message',\n        action: 'insert_text',\n        data: { text }\n      }, '*');\n    }\n\n    // \u53d1\u9001\u6d88\u606f\u7ed9\u8bbf\u5ba2\n    function sendMessage(content) {\n      window.parent.postMessage({\n        type: 'tgo_plugin_message',\n        action: 'send_message',\n        data: { content, content_type: 'text' }\n      }, '*');\n    }\n  <\/script>\n</head>\n<body>\n  <h1>CRM \u4fe1\u606f</h1>\n  <p>\u5f53\u524d\u8bbf\u5ba2: <span id=\"visitor-name\">-</span></p>\n  <button onclick=\"insertText('\u60a8\u597d\uff01')\">\u5feb\u6377\u56de\u590d</button>\n</body>\n</html>\n"})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"\u7b2c\u4e09\u65b9\u5e73\u53f0\u63a5\u5165channel_integration",children:"\u7b2c\u4e09\u65b9\u5e73\u53f0\u63a5\u5165\uff08channel_integration\uff09"}),"\n",(0,t.jsx)(e.h3,{id:"\u6982\u8ff0-3",children:"\u6982\u8ff0"}),"\n",(0,t.jsx)(e.p,{children:"\u6269\u5c55\u65b0\u7684\u6d88\u606f\u63a5\u5165\u6e20\u9053\u3002\u9002\u7528\u4e8e\u5bf9\u63a5\u4f01\u4e1a\u81ea\u6709 IM \u7cfb\u7edf\u3001\u884c\u4e1a\u7279\u5b9a\u5e73\u53f0\u7b49\u3002"}),"\n",(0,t.jsx)(e.h3,{id:"\u80fd\u529b\u58f0\u660e-3",children:"\u80fd\u529b\u58f0\u660e"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "type": "channel_integration",\n  "channel_type": "custom_im",\n  "name": "\u81ea\u5b9a\u4e49IM\u5e73\u53f0",\n  "icon": "message-circle"\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u914d\u7f6e\u6e05\u5355",children:"\u914d\u7f6e\u6e05\u5355"}),"\n",(0,t.jsx)(e.p,{children:"\u5bbf\u4e3b\u8bf7\u6c42\u5e73\u53f0\u914d\u7f6e\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "method": "channel_integration/manifest"\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:"\u54cd\u5e94\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "result": {\n    "channel_type": "custom_im",\n    "name": "\u81ea\u5b9a\u4e49IM\u5e73\u53f0",\n    "icon": "message-circle",\n    "description": "\u63a5\u5165\u81ea\u5b9a\u4e49IM\u5e73\u53f0\uff0c\u5b9e\u73b0\u6d88\u606f\u53cc\u5411\u540c\u6b65",\n    \n    "config_schema": {\n      "type": "object",\n      "properties": {\n        "api_endpoint": {\n          "type": "string",\n          "title": "API \u5730\u5740",\n          "description": "\u5e73\u53f0 API \u63a5\u53e3\u5730\u5740",\n          "placeholder": "https://api.example.com"\n        },\n        "api_key": {\n          "type": "string",\n          "title": "API Key",\n          "description": "\u5e73\u53f0 API \u5bc6\u94a5",\n          "format": "password"\n        },\n        "enable_webhook": {\n          "type": "boolean",\n          "title": "\u542f\u7528 Webhook",\n          "default": true\n        }\n      },\n      "required": ["api_endpoint", "api_key"]\n    },\n    \n    "setup_guide": "# \u63a5\u5165\u6307\u5357\\n\\n## \u6b65\u9aa4\u4e00\uff1a\u83b7\u53d6 API \u5bc6\u94a5\\n\\n1. \u767b\u5f55\u5e73\u53f0\u540e\u53f0\\n2. \u8fdb\u5165\u300c\u5f00\u53d1\u8005\u8bbe\u7f6e\u300d\\n3. \u521b\u5efa\u65b0\u7684 API \u5bc6\u94a5\\n\\n## \u6b65\u9aa4\u4e8c\uff1a\u914d\u7f6e Webhook\\n\\n\u5c06\u4ee5\u4e0b\u5730\u5740\u914d\u7f6e\u4e3a\u6d88\u606f\u56de\u8c03\u5730\u5740\uff1a\\n\\n```\\nhttps://your-tgo-domain.com/api/webhooks/custom-im\\n```\\n\\n## \u6b65\u9aa4\u4e09\uff1a\u6d4b\u8bd5\u8fde\u63a5\\n\\n\u4fdd\u5b58\u914d\u7f6e\u540e\uff0c\u70b9\u51fb\u300c\u6d4b\u8bd5\u8fde\u63a5\u300d\u9a8c\u8bc1\u914d\u7f6e\u662f\u5426\u6b63\u786e\u3002",\n    \n    "webhook_endpoint": "/api/webhooks/custom-im",\n    \n    "capabilities": {\n      "send_text": true,\n      "send_image": true,\n      "send_file": true,\n      "send_rich_card": false,\n      "receive_text": true,\n      "receive_image": true,\n      "receive_file": true,\n      "typing_indicator": true,\n      "read_receipt": false\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u914d\u7f6e\u8868\u5355-schema",children:"\u914d\u7f6e\u8868\u5355 Schema"}),"\n",(0,t.jsx)(e.p,{children:"\u4f7f\u7528 JSON Schema \u5b9a\u4e49\u914d\u7f6e\u8868\u5355\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "config_schema": {\n    "type": "object",\n    "properties": {\n      "api_key": {\n        "type": "string",\n        "title": "API Key",\n        "format": "password"\n      },\n      "region": {\n        "type": "string",\n        "title": "\u670d\u52a1\u533a\u57df",\n        "enum": ["cn-north", "cn-south", "ap-southeast"],\n        "enumNames": ["\u534e\u5317", "\u534e\u5357", "\u4e1c\u5357\u4e9a"]\n      },\n      "features": {\n        "type": "array",\n        "title": "\u542f\u7528\u529f\u80fd",\n        "items": {\n          "type": "string",\n          "enum": ["auto_reply", "typing_indicator", "read_receipt"]\n        },\n        "uniqueItems": true\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u6d88\u606f\u5904\u7406",children:"\u6d88\u606f\u5904\u7406"}),"\n",(0,t.jsx)(e.h4,{id:"\u63a5\u6536\u6d88\u606fwebhook",children:"\u63a5\u6536\u6d88\u606f\uff08Webhook\uff09"}),"\n",(0,t.jsx)(e.p,{children:"\u5916\u90e8\u5e73\u53f0\u901a\u8fc7 Webhook \u53d1\u9001\u6d88\u606f\u5230 TGO\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'POST /api/webhooks/custom-im\nContent-Type: application/json\n\n{\n  "event": "message",\n  "timestamp": 1703664000000,\n  "from": {\n    "id": "external_user_123",\n    "name": "\u8bbf\u5ba2\u59d3\u540d",\n    "avatar": "https://..."\n  },\n  "message": {\n    "id": "msg_abc123",\n    "type": "text",\n    "content": "\u4f60\u597d\uff0c\u8bf7\u95ee..."\n  }\n}\n'})}),"\n",(0,t.jsx)(e.h4,{id:"\u53d1\u9001\u6d88\u606f",children:"\u53d1\u9001\u6d88\u606f"}),"\n",(0,t.jsx)(e.p,{children:"TGO \u901a\u8fc7\u63d2\u4ef6\u53d1\u9001\u6d88\u606f\u5230\u5916\u90e8\u5e73\u53f0\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "method": "channel_integration/send_message",\n  "params": {\n    "channel_id": "ch_xyz789",\n    "to": {\n      "id": "external_user_123"\n    },\n    "message": {\n      "type": "text",\n      "content": "\u60a8\u597d\uff0c\u611f\u8c22\u54a8\u8be2..."\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:"\u54cd\u5e94\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "result": {\n    "success": true,\n    "message_id": "external_msg_456"\n  }\n}\n'})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"\u56fe\u6807\u53c2\u8003",children:"\u56fe\u6807\u53c2\u8003"}),"\n",(0,t.jsxs)(e.p,{children:["TGO \u4f7f\u7528 ",(0,t.jsx)(e.a,{href:"https://lucide.dev/icons/",children:"Lucide"})," \u56fe\u6807\u5e93\uff0c\u5e38\u7528\u56fe\u6807\uff1a"]}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"\u56fe\u6807\u540d"}),(0,t.jsx)(e.th,{children:"\u7528\u9014"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"shopping-cart"})}),(0,t.jsx)(e.td,{children:"\u8ba2\u5355/\u8d2d\u7269"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"users"})}),(0,t.jsx)(e.td,{children:"\u5ba2\u6237/CRM"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"message-circle"})}),(0,t.jsx)(e.td,{children:"\u6d88\u606f/\u804a\u5929"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"zap"})}),(0,t.jsx)(e.td,{children:"\u5feb\u6377\u64cd\u4f5c"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"file-text"})}),(0,t.jsx)(e.td,{children:"\u6587\u6863/\u5de5\u5355"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"settings"})}),(0,t.jsx)(e.td,{children:"\u8bbe\u7f6e"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"search"})}),(0,t.jsx)(e.td,{children:"\u641c\u7d22"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"star"})}),(0,t.jsx)(e.td,{children:"\u6536\u85cf/VIP"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"tag"})}),(0,t.jsx)(e.td,{children:"\u6807\u7b7e"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"clock"})}),(0,t.jsx)(e.td,{children:"\u65f6\u95f4/\u5386\u53f2"})]})]})]}),"\n",(0,t.jsx)(e.h2,{id:"\u4e0b\u4e00\u6b65",children:"\u4e0b\u4e00\u6b65"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"/plugin/templates",children:"\u6a21\u7248\u89c4\u8303"})," - \u5b66\u4e60 JSON \u6a21\u7248\u683c\u5f0f"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.a,{href:"/plugin/examples",children:"\u5b8c\u6574\u793a\u4f8b"})," - \u67e5\u770b\u5404\u53ef\u63d2\u70b9\u7684\u5b8c\u6574\u5b9e\u73b0"]}),"\n"]})]})}function o(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(h,{...n})}):h(n)}}}]);